"use client";

import React, { useEffect, useState } from "react";
import { useTheme } from "next-themes";

export default function ThemeToggle() {
    const { resolvedTheme, setTheme } = useTheme();
    const [mounted, setMounted] = useState(false);

    useEffect(() => setMounted(true), []);

    if (!mounted) return null;

    return (
        <label
            htmlFor="theme-toggle"
            className="relative flex h-6 w-12 cursor-pointer items-center rounded-full bg-slate-100 dark:bg-charcoal transition-colors flex-shrink-0 p-1.5"
        >
            {/* Hidden Checkbox */}
            <input
                id="theme-toggle"
                type="checkbox"
                checked={resolvedTheme === "dark"}
                onChange={() => setTheme(resolvedTheme === "dark" ? "light" : "dark")}
                className="peer sr-only"
            />

            {/* Sun Icon (Visible in Light Mode) */}
            <div className="absolute left-1 top-1/2 -translate-y-1/2 text-amber-400 transition-all duration-300 peer-checked:opacity-0 hover:scale-110 hover:rotate-5 hover:drop-shadow-[0_0_6px_rgba(255,180,0,0.8)]">
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="18"
                    height="18"
                    fill="none"
                    viewBox="0 0 145 135"
                    strokeWidth="1.8"
                    stroke="currentColor"
                    className="size-6"
                >
                    <g xmlns="http://www.w3.org/2000/svg" clipPath="url(#clip1)">
                        <path
                            d="M59.5129 95.0604C65.0755 96.6018 71.0502 97.2122 76.6779 97.6421C77.3985 97.6971 78.114 97.7243 78.8242 97.7243C83.0986 97.732 87.3104 96.6956 91.0864 94.7057C101.738 89.1385 107.435 79.7786 109.01 65.2432V65.2179V65.1933C108.281 48.1485 101.92 38.4675 88.3868 33.8015C84.2382 32.4872 79.9495 31.6551 75.608 31.3221C68.3832 30.6159 59.8296 33.3645 52.7332 38.6747C44.7024 44.6846 39.62 53.1551 38.4231 62.5254C36.394 78.4289 44.4743 90.8941 59.5129 95.0604ZM44.9317 64.3153C45.7918 48.6774 57.7868 39.6256 68.726 36.3682C69.4525 36.1628 70.2057 36.0635 70.9622 36.0736C73.3242 36.0736 75.9924 36.8634 78.2143 37.6273C82.2587 39.1231 86.1565 40.9832 89.8607 43.1841C93.116 45.0492 95.669 47.9196 97.1324 51.3587C101.98 62.4425 100.593 73.0359 93.0137 82.8431C89.1798 87.8031 83.4088 90.2656 75.3715 90.3698C73.8761 90.0998 72.3494 89.8571 70.8755 89.6228C67.5687 89.1567 64.2885 88.5197 61.0487 87.7144C46.8741 83.9087 44.4607 72.8902 44.9317 64.3153Z"
                            fill="currentColor"
                        />
                        <path
                            d="M79.8287 111.93C79.4814 110.847 78.3711 109.498 77.3338 109.294C76.5082 109.134 75.4162 109.592 73.9938 110.698C73.4204 111.143 73.2405 112.033 73.0816 112.819L73.0451 112.998C71.8579 118.764 72.5114 124.552 73.3943 129.949C73.5123 130.524 73.7129 131.079 73.9905 131.597C74.7151 133.091 75.7739 133.903 76.9311 133.903C77.2361 133.902 77.5384 133.849 77.8251 133.745C78.4487 133.481 79.0136 133.097 79.4873 132.616C79.9603 132.133 80.333 131.564 80.5839 130.938C81.0745 129.618 80.9657 128.032 80.8693 126.633L80.8634 126.544C80.6895 124.016 80.4458 121.475 80.2118 119.019C80.118 118.04 80.0261 117.069 79.9362 116.106C79.9362 115.666 79.9642 115.231 79.9916 114.805C80.1161 113.845 80.0607 112.87 79.8287 111.93Z"
                            fill="currentColor"
                        />
                        <path
                            d="M119.54 65.0159C119.605 66.9308 120.894 67.9736 123.374 68.1173C125.264 68.2267 127.157 68.3193 128.568 68.3886L129.859 68.4533H129.876C131.228 68.4533 132.457 68.4708 133.602 68.487C134.595 68.5012 135.532 68.5148 136.434 68.5148C137.699 68.5148 138.896 68.4883 140.083 68.4015C142.697 68.2106 144.352 66.7832 144.296 64.7602C144.245 62.8865 142.693 61.6488 139.926 61.2753C139.688 61.2367 139.446 61.2185 139.204 61.2209L137.413 61.2818C132.675 61.4432 127.936 61.6087 123.198 61.7783C120.773 61.867 119.474 63.0167 119.54 65.0159Z"
                            fill="currentColor"
                        />
                        <path
                            d="M117.185 108.429C113.966 105.694 110.452 102.767 106.441 99.4781C104.855 98.1776 103.34 98.0449 102.065 99.0897C100.507 100.364 100.98 102.081 101.566 103.434C101.8 103.989 102.144 104.491 102.579 104.911L103.655 105.904C106.583 108.605 109.611 111.397 112.673 114.052C113.286 114.52 113.983 114.868 114.728 115.076C114.943 115.15 115.135 115.214 115.283 115.28L115.416 115.31H115.506C117.139 115.31 118.377 114.763 118.998 113.763C119.272 113.273 119.409 112.72 119.396 112.16C119.384 111.6 119.222 111.054 118.926 110.577C118.488 109.759 117.897 109.03 117.185 108.429Z"
                            fill="currentColor"
                        />
                        <path
                            d="M72.6908 4.20727C72.928 7.4705 73.0329 10.8011 73.1339 14.0223L73.1437 14.3459C73.1658 15.0405 73.1397 15.754 73.1143 16.4434C73.0883 17.1606 73.0609 17.9018 73.0863 18.6352C73.1632 20.8213 74.3452 22.1801 76.3266 22.3639C76.4648 22.3765 76.5997 22.3827 76.7319 22.3827C78.4912 22.3827 79.81 21.2713 80.2948 19.3402C80.5228 18.3072 80.6479 17.2542 80.6668 16.1967C80.6825 15.8627 80.6968 15.5611 80.7203 15.3054V15.2736V15.2419C80.6434 14.4735 80.59 13.7666 80.5378 13.1056C80.4694 11.8494 80.3215 10.5987 80.0961 9.36074C79.6308 6.9835 78.9923 4.64297 78.1856 2.35782C77.5288 0.554317 76.0224 -0.254867 74.3413 0.297964C72.4295 0.926534 72.5559 2.49505 72.6673 3.87907L72.6908 4.20727Z"
                            fill="currentColor"
                        />
                        <path
                            d="M20.7896 114.171C21.3962 114.898 22.4707 115.28 23.9074 115.28C23.998 115.28 24.0905 115.28 24.1843 115.274H24.2664L24.3388 115.234C24.4841 115.152 24.6782 115.067 24.8985 114.968C25.6789 114.67 26.3944 114.226 27.0057 113.659C29.7704 110.764 32.5996 107.625 35.6561 104.065C37.0062 102.492 37.0245 100.715 35.7083 99.4268C34.8065 98.5458 33.2739 97.9088 31.095 99.8748C27.9238 102.737 24.849 105.651 21.9559 108.539C21.1508 109.376 20.5893 110.414 20.3315 111.543C20.197 111.987 20.1684 112.455 20.2479 112.911C20.3275 113.367 20.5129 113.799 20.7896 114.171Z"
                            fill="currentColor"
                        />
                        <path
                            d="M33.1879 38.3164C33.8157 38.9307 34.6616 39.2748 35.5428 39.2744C35.7842 39.2837 36.0244 39.2355 36.2432 39.134C36.8878 38.6703 37.3743 38.0221 37.6376 37.2761C37.7953 36.9563 37.9582 36.6287 38.1419 36.3238L38.2345 36.173L38.1595 36.0124C37.9458 35.5534 37.7608 35.0952 37.5803 34.6485C37.2476 33.7025 36.792 32.8037 36.225 31.9749C33.7907 28.7531 31.1889 25.576 28.6725 22.5037L28.1551 21.8719C27.724 21.2477 27.0658 20.8142 26.3193 20.6627C25.5728 20.5111 24.7961 20.6533 24.1531 21.0594C23.8302 21.2368 23.5488 21.4799 23.3271 21.7729C23.1055 22.0659 22.9486 22.402 22.8669 22.7594C22.7891 23.1541 22.7924 23.5603 22.8768 23.9537C22.9611 24.3471 23.1246 24.7194 23.3575 25.0484C26.3307 29.3183 29.5462 33.6613 33.1879 38.3164Z"
                            fill="currentColor"
                        />
                        <path
                            d="M110.337 30.1877C110.897 30.4825 111.527 30.6227 112.161 30.5936C112.87 30.5776 113.577 30.5013 114.273 30.3657C115.016 30.2362 115.67 29.475 116.214 28.7473C118.612 25.5378 121.114 22.1108 123.652 18.5627C123.953 18.1114 124.198 17.6261 124.383 17.1172C124.448 16.9553 124.507 16.8071 124.566 16.6835L124.598 16.554C124.634 16.1427 124.567 15.7288 124.404 15.3492C124.24 14.9696 123.985 14.6358 123.661 14.3777C123.373 14.1811 123.04 14.0586 122.694 14.0211C122.347 13.9836 121.995 14.0323 121.672 14.1627C120.923 14.4956 120.256 14.986 119.717 15.5999C117.272 18.1245 114.647 20.8789 111.456 24.2742C110.906 24.8534 110.419 25.488 110.002 26.1677C109.45 26.9748 109.222 27.9583 109.364 28.9241C109.431 29.1895 109.551 29.4384 109.719 29.6558C109.886 29.8731 110.096 30.0541 110.337 30.1877Z"
                            fill="currentColor"
                        />
                        <path
                            d="M3.74066 71.3985C5.35789 71.7014 7.0155 71.9163 8.61774 72.1196C9.30125 72.207 9.98607 72.2944 10.665 72.3889L11.0104 72.4368L11.0455 72.0801L11.7401 72.0853C12.5116 72.0924 13.3085 72.0995 14.0937 72.0685C14.8888 72.0335 15.6806 71.9442 16.4635 71.8011C18.3635 71.4587 19.8445 70.6579 20.4244 69.6597C20.5662 69.4299 20.6543 69.171 20.6821 68.903C20.71 68.6343 20.6769 68.3631 20.5854 68.1093C19.7383 65.7621 17.4578 65.819 15.806 65.8572L12.0757 65.9433C9.54494 66.0003 7.01486 66.0566 4.48476 66.1317C3.47676 66.1615 1.3793 66.2236 1.09652 68.3327C0.87954 69.9018 1.86931 71.0489 3.74066 71.3985Z"
                            fill="currentColor"
                        />
                    </g>
                    <defs>
                        <clipPath id="clip1">
                            <rect width="145" height="135" fill="white"/>
                        </clipPath>
                    </defs>
                </svg>
            </div>

            {/* Moon Icon (Visible in Dark Mode) */}
            <div
                className="absolute right-1 top-1/2 -translate-y-1/2 text-gray-100 opacity-0 transition-all duration-300 peer-checked:opacity-100 hover:scale-110 hover:rotate-10 hover:drop-shadow-[0_0_6px_rgba(200,200,255,0.8)]">
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="18"
                    height="18"
                    viewBox="0 0 156 146"
                    fill="none"
                >
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                    <g clipPath="url(#clip2)">
                        <path
                            d="M121.957 103.163C125.881 102.928 129.837 102.923 133.72 102.388C136.915 101.948 140.025 100.889 143.171 100.09C144.691 99.7039 146.182 99.1546 147.722 98.9084C149.978 98.5468 152.001 99.1598 153.325 101.147C154.572 103.018 154.264 104.954 153.333 106.905C148.513 117.012 140.849 124.655 131.986 131.141C121.135 139.082 108.699 143.113 95.4809 144.727C83.273 146.22 71.0442 146.272 58.9531 143.581C41.4413 139.684 26.3475 131.645 15.1444 117.275C4.13504 103.155 -0.0989723 87.0189 1.45589 69.2977C2.82654 52.995 8.52934 37.3547 17.9739 23.9961C23.4215 16.2146 29.9055 9.38657 38.073 4.33996C41.1493 2.43658 44.3527 0.861628 48.0742 0.664725C51.9288 0.463885 53.2713 2.38262 51.5635 5.85005C49.1278 10.7962 47.0392 15.8499 46.0186 21.3061C44.6114 28.8264 45.0945 36.2542 46.782 43.6767C50.4181 59.6657 57.3876 73.8803 68.9806 85.6373C78.1431 95.0885 90.3707 100.969 103.474 102.226C109.604 102.883 115.778 103.131 121.932 103.566C121.939 103.437 121.948 103.299 121.957 103.163ZM135.166 114.522L134.675 113.716C132.895 113.803 131.106 113.809 129.336 113.989C121.505 114.712 113.623 114.668 105.801 113.858C85.496 111.959 68.9865 103.067 56.2719 87.1816C46.7389 75.1897 40.233 61.0786 37.3039 46.0418C35.0461 34.9057 35.1379 23.989 39.2774 13.2736C39.3607 13.0583 39.1666 12.7358 39.0373 12.1897C37.6078 13.4486 36.2878 14.4907 35.1064 15.6688C18.843 31.9145 10.5927 51.6164 10.1962 74.5235C9.93043 89.8451 14.8215 103.357 25.3577 114.71C34.7177 124.796 46.4814 130.463 59.6646 133.425C72.5478 136.32 85.5466 136.06 98.4981 133.917C108.934 132.191 118.632 128.475 127.031 121.894C129.905 119.647 132.464 116.992 135.166 114.522Z"
                            fill="currentColor"
                        />
                    </g>
                    <defs>
                        <clipPath id="clip2">
                            <rect width="153.583" height="145.707" fill="white" transform="translate(0.579834 0.0625)"/>
                        </clipPath>
                    </defs>
                </svg>
            </div>

        </label>
    );
}